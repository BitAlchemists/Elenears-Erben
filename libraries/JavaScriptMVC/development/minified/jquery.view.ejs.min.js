(function(h){var q=function(a){eval(a)},r=function(a){return a.substr(0,a.length-1)},m=h.String.rsplit,k=h.extend,s=h.isArray,n=function(a){return a.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\t/g,"\\t")},t=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")},f=function(a){if(this.constructor!=f){var b=new f(a);return function(c,e){return b.render(c,e)}}if(typeof a=="function"){this.template=
{};this.template.process=a}else{k(this,f.options,a);this.template=u(this.text,this.type,this.name)}};h.EJS=f;f.prototype={constructor:f,render:function(a,b){a=a||{};this._extra_helpers=b;b=new f.Helpers(a,b||{});return this.template.process.call(a,a,b)}};f.text=function(a){if(typeof a=="string")return a;if(a===null||a===undefined)return"";var b=a.hookup&&function(c,e){a.hookup.call(a,c,e)}||typeof a=="function"&&a||s(a)&&function(c,e){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(c,e):a[d](c,
e)};if(b)return"data-view-id='"+h.View.hookup(b)+"'";return a.toString?a.toString():""};f.clean=function(a){return typeof a=="string"?t(a):typeof a=="number"?a:f.text(a)};var o=function(a,b,c){b=m(b,/\n/);for(var e=0;e<b.length;e++)v(a,b[e],c)},v=function(a,b,c){a.lines++;b=m(b,a.splitter);for(var e,d=0;d<b.length;d++){e=b[d];e!==null&&c(e,a)}},w=function(a,b){var c={};k(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",scan:o,lines:0});c.splitter=new RegExp("("+
[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return c},u=function(a,b,c){a=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n");b=b||"<";var e=new f.Buffer(["var ___v1ew = [];"],[]),d="",p=function(i){e.push("___v1ew.push(",'"',n(i),'");')},j=null,l=function(){d=""};o(w(b,b==="["?"]":">"),a||"",function(i,g){if(j===null)switch(i){case "\n":d+="\n";p(d);e.cr();l();break;case g.left:case g.eLeft:case g.eeLeft:case g.cmnt:j=
i;d.length>0&&p(d);l();break;case g.dLeft:d+=g.left;break;default:d+=i;break}else switch(i){case g.right:switch(j){case g.left:if(d[d.length-1]=="\n"){d=r(d);e.push(d,";");e.cr()}else e.push(d,";");break;case g.eLeft:e.push("___v1ew.push(","(jQuery.EJS.clean(",d,")));");break;case g.eeLeft:e.push("___v1ew.push(","(jQuery.EJS.text(",d,")));");break}j=null;l();break;case g.dRight:d+=g.right;break;default:d+=i;break}});d.length>0&&e.push("___v1ew.push(",'"',n(d)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+
e.close()+" return ___v1ew.join('');}}}catch(e){e.lineNumber=null;throw e;}"};q.call(a,"this.process = (function(_CONTEXT,_VIEW){"+a.out+"});\r\n//@ sourceURL="+c+".js");return a};f.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};f.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=
[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};f.options={type:"<",ext:".ejs"};f.Helpers=function(a,b){this._data=a;this._extras=b;k(this,b)};f.Helpers.prototype={plugin:function(){var a=h.makeArray(arguments),b=a.shift();return function(c){c=h(c);c[b].apply(c,a)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return h.View(a,b,c)}};h.View.register({suffix:"ejs",script:function(a,b){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new f({text:b,
name:a})).template.out+" })"},renderer:function(a,b){var c=new f({text:b,name:a});return function(e,d){return c.render.call(c,e,d)}}})})(jQuery);
