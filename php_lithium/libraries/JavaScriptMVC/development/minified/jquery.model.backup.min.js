(function(e){var g=e.isArray,j=function(a){var b=0;for(var c in a)b++;return b},f=function(a,b,c){var d=typeof a,h=g(a);if(c===-1)return d==="object"||a===b;if(d!==typeof b||h!==g(b))return false;if(a===b)return true;if(h){if(a.length!==b.length)return false;for(c=0;c<a.length;c++)if(!f(a[c],b[c]))return false;return true}else if(d==="object"||d==="function"){d=0;for(var i in a){if(!f(a[i],b[i],c===false?-1:undefined))return false;d++}return d===j(b)}return false},k=function(a){var b={};for(var c in a)if(typeof a[c]!==
"object"||a[c]===null)b[c]=a[c];return b};e.extend(e.Model.prototype,{backup:function(){this._backupStore=this.serialize();return this},isDirty:function(a){return this._backupStore?!f(this.serialize(),this._backupStore,!!a):false},restore:function(a){this.attrs(a?this._backupStore:k(this._backupStore));return this}})})(jQuery);
