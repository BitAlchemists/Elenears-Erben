(function(g){var f=function(d,a,b){if(!b){b=a;a={}}a=a||{};d=g.makeArray(d);if(!(a.testIf&&!a.testIf.call(this))){var c=this;g.each(d,function(e,h){c.validations[h]||(c.validations[h]=[]);c.validations[h].push(function(){var i=b.call(this,this[h]);return i===undefined?undefined:a.message||i})})}};g.extend(g.Model,{validate:f,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",
range:"is out of range"},validateFormatOf:function(d,a,b){f.call(this,d,b,function(c){if(typeof c!="undefined"&&c!=""&&String(c).match(a)==null)return this.Class.validationMessages.format})},validateInclusionOf:function(d,a,b){f.call(this,d,b,function(c){if(typeof c!="undefined")if(g.grep(a,function(e){return e==c}).length==0)return this.Class.validationMessages.inclusion})},validateLengthOf:function(d,a,b,c){f.call(this,d,c,function(e){if(typeof e=="undefined"&&a>0||e.length<a)return this.Class.validationMessages.lengthShort+
" (min="+a+")";else if(typeof e!="undefined"&&e.length>b)return this.Class.validationMessages.lengthLong+" (max="+b+")"})},validatePresenceOf:function(d,a){f.call(this,d,a,function(b){if(typeof b=="undefined"||b==""||b===null)return this.Class.validationMessages.presence})},validateRangeOf:function(d,a,b,c){f.call(this,d,c,function(e){if(typeof e!="undefined"&&e<a||e>b)return this.Class.validationMessages.range+" ["+a+","+b+"]"})}})})(jQuery);
